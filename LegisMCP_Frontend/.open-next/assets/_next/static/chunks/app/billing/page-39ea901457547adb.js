(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{4912:function(e,t,r){Promise.resolve().then(r.bind(r,8105))},2252:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6858:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},44:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},401:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7414:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8906:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},1239:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},8105:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(7437),s=r(2265),a=r(6824),i=r(9376),l=r(6518),c=r(2381),o=r(9820),d=r(9174),u=r(5937),m=r(6840),f="horizontal",h=["horizontal","vertical"],p=s.forwardRef((e,t)=>{let{decorative:r,orientation:s=f,...a}=e,i=h.includes(s)?s:f;return(0,n.jsx)(m.WV.div,{"data-orientation":i,...r?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...a,ref:t})});p.displayName="Separator";var x=r(3448);let y=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:a=!0,...i}=e;return(0,n.jsx)(p,{ref:t,decorative:a,orientation:s,className:(0,x.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...i})});y.displayName=p.displayName;var g=r(7414),v=r(1239),j=r(8906),b=r(44),N=r(5863),k=r(401),w=r(8226),E=r(2252),C=r(6858),R=r(8889);let P={free:{name:"Free",icon:g.Z,color:"text-green-600",features:["100 MCP calls (one-time)","All Legislative tools","Community support"]},starter:{name:"Developer",icon:v.Z,color:"text-blue-600",features:["1,000 MCP calls/month","Standard rate limiting","Email support"]},professional:{name:"Professional",icon:j.Z,color:"text-purple-600",features:["10,000 MCP calls/month","Priority rate limiting","Priority support"]},enterprise:{name:"Enterprise",icon:b.Z,color:"text-emerald-600",features:["Unlimited MCP calls","No rate limiting","Dedicated support"]}};function _(){let{user:e,isLoading:t}=(0,a.aF)(),r=(0,i.useRouter)(),[m,f]=(0,s.useState)(null),[h,p]=(0,s.useState)(!0),[x,g]=(0,s.useState)("monthly"),[v,j]=(0,s.useState)(null),[b,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&!t&&I()},[e,t]);let I=async()=>{try{let e=await fetch("/api/user/subscription");if(e.ok){let t=await e.json();f(t)}}catch(e){console.error("Error loading subscription:",e)}finally{p(!1)}},S=async e=>{if("enterprise"===e){r.push("/contact/enterprise");return}j(e);try{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e,billingFrequency:x})});if(t.ok){let{url:e}=await t.json();window.location.href=e}}catch(e){console.error("Error changing plan:",e)}finally{j(null)}},Z=async()=>{if(confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your billing period.")){_(!0);try{(await fetch("/api/user/subscription/cancel",{method:"POST"})).ok&&(await I(),alert("Your subscription has been canceled. You will retain access until the end of your billing period."))}catch(e){console.error("Error canceling subscription:",e),alert("Failed to cancel subscription. Please try again.")}finally{_(!1)}}},M=async()=>{r.push("/api/billing/portal")};if(t||h)return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(l.Header,{}),(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,n.jsx)(N.Z,{className:"h-8 w-8 animate-spin"})})]});if(!e)return r.push("/api/auth/login"),null;let T=(null==m?void 0:m.plan)||"free",A=P[T],F=A.icon;return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(l.Header,{}),(0,n.jsx)("div",{className:"flex-1 bg-background",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Billing & Subscription"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage your subscription and billing preferences"})]}),(0,n.jsxs)(o.Zb,{className:"mb-8",children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)(o.ll,{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(F,{className:"h-5 w-5 ".concat(A.color)}),"Current Plan"]}),(null==m?void 0:m.status)&&"free"!==m.status&&(0,n.jsx)(d.C,{variant:"active"===m.status?"default":"destructive",children:m.status})]})}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-2xl font-semibold",children:A.name}),(0,n.jsx)("div",{className:"mt-2 space-y-1",children:A.features.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,n.jsx)(k.Z,{className:"h-4 w-4 text-green-500"}),e]},t))})]}),(null==m?void 0:m.stripeCustomerId)&&(0,n.jsxs)(c.z,{onClick:M,variant:"outline",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Manage Billing"]})]}),(null==m?void 0:m.currentPeriodEnd)&&(0,n.jsx)(y,{}),(0,n.jsxs)("div",{className:"space-y-2",children:[(null==m?void 0:m.currentPeriodEnd)&&(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:m.cancelAtPeriodEnd?"Access until":"Next billing date"}),(0,n.jsx)("span",{className:"font-medium",children:new Date(m.currentPeriodEnd).toLocaleDateString()})]}),(null==m?void 0:m.cancelAtPeriodEnd)&&(0,n.jsxs)(u.bZ,{children:[(0,n.jsx)(E.Z,{className:"h-4 w-4"}),(0,n.jsx)(u.X,{children:"Your subscription is set to cancel at the end of the current billing period."})]})]})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{children:"Change Plan"}),(0,n.jsx)(o.SZ,{children:"Choose a plan that fits your needs. You can change or cancel anytime."})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"flex justify-center mb-8",children:(0,n.jsxs)("div",{className:"inline-flex items-center space-x-1 bg-muted rounded-lg p-1",children:[(0,n.jsx)("button",{onClick:()=>g("monthly"),className:"px-4 py-2 text-sm font-medium rounded-md transition-all ".concat("monthly"===x?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:"Monthly"}),(0,n.jsxs)("button",{onClick:()=>g("yearly"),className:"px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ".concat("yearly"===x?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:["Yearly",(0,n.jsx)(d.C,{variant:"secondary",className:"text-xs",children:"Save 20%"})]})]})}),(0,n.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Object.entries(R.KC.plans).map(e=>{let[t,r]=e,s=P[t],a=s.icon,i=T===t,l=r.isFree?0:12*r.yearly.amount,o=r.monthly.amount;return(0,n.jsxs)("div",{className:"relative rounded-lg border p-6 ".concat(i?"border-primary bg-primary/5":"border-border"),children:[i&&(0,n.jsx)(d.C,{className:"absolute -top-3 left-4",variant:"default",children:"Current Plan"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(a,{className:"h-8 w-8 ".concat(s.color," mb-2")}),(0,n.jsx)("h3",{className:"font-semibold text-lg",children:r.name}),r.isEnterprise?(0,n.jsx)("p",{className:"text-2xl font-bold mt-2",children:"Contact Sales"}):r.isFree?(0,n.jsx)("p",{className:"text-2xl font-bold mt-2",children:"Free"}):(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-2xl font-bold",children:(0,R.T4)("monthly"===x?o:l)}),(0,n.jsxs)("span",{className:"text-muted-foreground text-sm",children:["/","monthly"===x?"mo":"yr"]})]})]}),(0,n.jsx)("ul",{className:"space-y-2 text-sm",children:s.features.map((e,t)=>(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)(k.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,n.jsx)("span",{children:e})]},t))}),(0,n.jsx)(c.z,{onClick:()=>S(t),disabled:i||null!==v,variant:i?"secondary":"default",className:"w-full",children:v===t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):i?"Current Plan":r.isEnterprise?"Contact Sales":(0,n.jsxs)(n.Fragment,{children:["Upgrade ",(0,n.jsx)(C.Z,{className:"h-4 w-4 ml-1"})]})})]})]},t)})}),(null==m?void 0:m.status)==="active"&&!m.cancelAtPeriodEnd&&"free"!==T&&(0,n.jsx)("div",{className:"mt-8 pt-8 border-t",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:"Cancel Subscription"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"You'll retain access until the end of your billing period"})]}),(0,n.jsx)(c.z,{onClick:Z,disabled:b,variant:"destructive",children:b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Canceling..."]}):"Cancel Subscription"})]})})]})]})]})})]})}},5937:function(e,t,r){"use strict";r.d(t,{X:function(){return o},bZ:function(){return c}});var n=r(7437),s=r(2265),a=r(535),i=r(3448);let l=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,...a}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),r),...a})});c.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});o.displayName="AlertDescription"},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var s=r(535),a=r(3448);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var n=r(7437),s=r(2265),a=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},8889:function(e,t,r){"use strict";r.d(t,{KC:function(){return s},T4:function(){return a}});var n=r(257);let s={plans:{free:{name:"Free",id:"free",isFree:!0,monthly:{priceId:n.env.STRIPE_FREE_PRICE_ID||"price_free",amount:0},yearly:{priceId:n.env.STRIPE_FREE_PRICE_ID||"price_free",amount:0}},starter:{name:"Developer",id:"starter",monthly:{priceId:n.env.STRIPE_STARTER_MONTHLY_PRICE_ID,amount:999},yearly:{priceId:n.env.STRIPE_STARTER_YEARLY_PRICE_ID,amount:9999}},professional:{name:"Professional",id:"professional",monthly:{priceId:n.env.STRIPE_PROFESSIONAL_MONTHLY_PRICE_ID,amount:2999},yearly:{priceId:n.env.STRIPE_PROFESSIONAL_YEARLY_PRICE_ID,amount:29999}},enterprise:{name:"Enterprise",id:"enterprise",isEnterprise:!0,monthly:{priceId:n.env.STRIPE_ENTERPRISE_MONTHLY_PRICE_ID||"price_enterprise",amount:0},yearly:{priceId:n.env.STRIPE_ENTERPRISE_YEARLY_PRICE_ID||"price_enterprise",amount:0}}},webhookEvents:["checkout.session.completed","customer.subscription.created","customer.subscription.updated","customer.subscription.deleted","invoice.payment_succeeded","invoice.payment_failed"]};function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e/100)}}},function(e){e.O(0,[624,656,548,793,518,971,117,744],function(){return e(e.s=4912)}),_N_E=e.O()}]);